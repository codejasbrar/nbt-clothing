{%- assign assign file_extension = 'png' -%}
<div class="swatch-wrapper " data-option-name="{{ option.name }}" data-option="option{{ option.position }}">
  <div class="flex align-center spaced">
  <div class="option-name flex align-center">
    <label class="swatch-label mr1" for="SingleOptionSelector-{{ index }}-{{ section.id }}">
		{{- option.name -}}
	</label>
  <label class="variant-label variant-label--color" for="SingleOptionSelector-{{ index }}-{{ product_id }}">
    <span class="visually-hidden">{{ option.name }}</span>
    <span class="variant-label__value" data-color-label>{{ option.selected_value }}</span>
  </label>
    </div>
      
 
    
  </div>

  <fieldset
    id="SingleOptionSelector-{{ index }}-{{ product_id }}"
    class="variant-input-wrap"
    data-index="option{{ option.position }}">
    {% if is_color %}
    <div class="swatch" data-option-index="{{ forloop.index }}">
      {%- for value in option.values -%}
        {%- assign swatch_color = value | split: ' ' | last | handle -%}
        <div data-value="{{ value | escape }}" class="swatch__element">
          <input
            id="option{{ option.position }}-{{ value | handle }}-{{ index }}-{{ unique }}"
            class="swatch__input swatch-element"
            type="radio"
            name="{{ option.name }}"
            value="{{ value | escape }}"
                 data-value="{{ value | escape }}"
            data-color-swatch
            data-single-option-selector
            data-index="option{{ option.position }}"
            {% if option.selected_value == value %}checked="checked"{% endif %}>
          <label class="swatch__label" for="option{{ option.position }}-{{ value | handle }}-{{ index }}-{{ unique }}">
            <span class="swatch__color swatch__color--{{ value | handle }}" style="color: {{ swatch_color }}; background-color: {{ swatch_color }}; background-image: url({{ value | handle | append: '.' | append: file_extension | asset_url }})"></span>
            <span class="visually-hidden">{{ value }}</span>
          </label>
        </div>
      {%- endfor -%}
    </div>
    {% else %}
    
        <div class="swatch box-swatch" data-option-index="{{ forloop.index }}">
      {%- for value in option.values -%}
        {%- assign swatch_color = value | split: ' ' | last | handle -%}
        <div data-value="{{ value | escape }}" class="swatch__element">
          <input
            id="option{{ option.position }}-{{ value | handle }}-{{ index }}-{{ unique }}"
            class="swatch__input swatch-element"
            type="radio"
            name="{{ option.name }}"
            value="{{ value | escape }}"
              data-value="{{ value | escape }}"   
            data-color-swatch
            data-single-option-selector
            data-index="option{{ option.position }}"
            {% if option.selected_value == value %}checked="checked"{% endif %}>
          <label class="swatch__label" for="option{{ option.position }}-{{ value | handle }}-{{ index }}-{{ unique }}">
            <span class="swatch-option--{{ value | handle }}"></span>
            <span class="swatch-name">{{ value }}</span>
          </label>
        </div>
      {%- endfor -%}
    </div>
    
    {% endif %}
  </fieldset>

    
  
</div>

